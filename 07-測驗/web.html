<!DOCTYPE html>
<html>
    <head>
        <title>測驗</title>
        <style>
            button{
                font-size:25px;
                margin-right:10px;
            }
            p{
                font-size: 25px;
                display: inline-block;
                margin-right:10px;
            }
            img{
                height: 200px;
                display: block;
                margin-top:50px;
            }
        </style>
    </head>
    <body>
        <button onclick="showSum()">購物車總額</button>
        <button onclick="clearCart()">清空購物車</button>

        <img src="product_images/product_image1.jpg">
        <p>$100</p>
        <button onclick="addProduct(100)">加入購物車</button>

        <img src="product_images/product_image2.jpg">
        <p>$200</p>
        <button onclick="addProduct(200)">加入購物車</button>
        

        <script>
            let cart = JSON.parse(localStorage.getItem("cart"));

            if (cart === null){
                cart = {
                    product1: {
                        num: 0,
                        name: "海底撈泡麵",
                        price: 100
    
                    },
                    product2: {
                        num: 0,
                        name: "養氣人蔘",
                        price: 200
                    },
                    sum: 0
                }
            }
            
            

            function addProduct(price) {
                if (price == 100){
                    cart.product1.num += 1;
                }
                else{
                    cart.product2.num += 1; 
                }
                cart.sum += price;
                saveCart();
                
            }

            function clearCart() {
                cart.product1.num = 0;
                cart.product2.num = 0;
                cart.sum = 0;
                localStorage.clear();
                console.log("購物車已清空");
            }

            function showSum() {
                console.log(`${cart.product1.name}數量:${cart.product1.num}`);
                console.log(`${cart.product2.name}數量:${cart.product2.num}`);
                console.log("總額:"+cart.sum);
            }

            function saveCart(){
                const jsonCart = JSON.stringify(cart);
                localStorage.setItem("cart", jsonCart);
            }
        </script>
    </body>
</html>
